

<div class="container-fluid">
  <div class="row">

    <!-- div class="col-md-3">
      <div class="btn-group">
        <button type="button" class="btn btn-default" ng-click="status = 'open'" ng-class="{ 'active' : status == 'open' }">Open&nbsp;<span class="badge">{{ statusCounts.open || 0 }}</span></button>
        <button type="button" class="btn btn-default" ng-click="status = 'ack'" ng-class="{ 'active' : status == 'ack' }">Ack&nbsp;<span class="badge">{{ statusCounts.ack || 0 }}</span></button>
        <button type="button" class="btn btn-default" ng-click="status = 'closed'" ng-class="{ 'active' : status == 'closed' }">Closed&nbsp;<span class="badge">{{ statusCounts.closed || 0 }}</span></button>
      </div>
    </div -->

    <div class="col-md-3 col-xs-4">
      <select class="form-control input-sm" ng-model="service"
      ng-options="s.service as s.service group by s.environment for s in services | orderBy:['environment','service']">
        <option value="">Service</option>
      </select>
    </div>

    <div class="col-md-5 col-xs-4">
      <input class="form-control input" ng-model="search" size="8" placeholder="Search">
    </div>

    <!-- div class="col-xs-2">
      <select class="form-control input-sm" ng-model="canned" ng-options="c.query as c.name group by c.group for c in config.queries">
        <option value="">--- Query ---</option>
      </select>
    </div -->

    <div class="col-md-1 col-xs-2 pull-right" >
      <div class="btn-group pull-right">
        <button type="button" class="btn btn-default btn-primary btn" ng-click="refreshAlerts(false)"><i class="glyphicon glyphicon-refresh"></i><span class="hidden-xs">&nbsp;Refresh</span></button>
      </div>
    </div>

    <div class="col-md-1 col-xs-2 pull-right" >
      <div class="btn-group pull-right">
        <button type="radio" class="btn btn-default btn-primary btn" ng-click="showAll=!showAll">
          <span ng-show="!showAll"><i class="glyphicon glyphicon-plus"></i><span class="hidden-xs">&nbsp;Open &amp; Ack</span></span>
          <span ng-show="showAll"><i class="glyphicon glyphicon-minus"></i><span class="hidden-xs">&nbsp;Open only</span></span>
        </button>
      </div>
    </div>

  </div> <!-- row -->

  <div class="row">
    <div class="col-md-12">
    <ul class="nav nav-tabs">
      <li ng-class="{active: !environment}"><a data-toggle="tab" ng-click="undefined(environment)">ALL</a></li> <!-- FIXME: how to unset a var ? -->
      <li ng-class="{active: environment == e.environment}" ng-repeat="e in environments"><a data-toggle="tab" ng-click="setEnv(e.environment)">{{ e.environment }}&nbsp;<span class="badge">{{ e.count || 0 }}</span></a></li>
    </ul>
    </div>
  </div> <!-- row -->

  <div class="row">
    <div class="col-md-2 pull-right">
        <label><input type="checkbox" ng-model="debug"> Show Query</label>
     </div>
  </div> <!-- row -->

  <div class="row">
    <div class="col-md-12">
      <div class="check-element animate-show" ng-show="debug">
        <pre>{{ combined | json }}</pre>
      </div>
    </div>
  </div> <!-- row -->

  <div class="row">
    <div class="col-md-12">
      <div class="check-element animate-show" ng-show="debug">
        <pre>{{ canned | json }}</pre>
      </div>
    </div>
  </div> <!-- row -->

  <div class="row">
    <div class="col-md-12">
      <table class="table">
        <tr ng-init="predicate = [reverseSeverityCode,'lastReceiveTime']">
          <th class="hidden-xs"><a href="" ng-click="predicate = severityCode; reverse=!reverse">Severity&nbsp;<span ng-hide="predicate != severityCode"><span ng-show="!reverse">v</span><span ng-show="reverse">^</span></span></a></th>
          <th class="hidden-xs"><a href="" ng-click="predicate = 'status'; reverse=!reverse">Status&nbsp;<span ng-hide="predicate != 'status'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="hidden-lg"><a href="" ng-click="predicate = 'lastReceiveTime'; reverse=!reverse">Time&nbsp;<span ng-hide="predicate != 'lastReceiveTime'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="visible-lg"><a href="" ng-click="predicate = 'lastReceiveTime'; reverse=!reverse">Last Receive Time&nbsp;<span ng-hide="predicate != 'lastReceiveTime'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="visible-lg"><a href="" ng-click="predicate = 'duplicateCount'; reverse=!reverse">Dupl.&nbsp;<span ng-hide="predicate != 'duplicateCount'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="hidden-xs"><a href="" ng-click="predicate = 'environment'; reverse=!reverse">Environment&nbsp;<span ng-hide="predicate != 'environment'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="hidden-xs"><a href="" ng-click="predicate = 'service'; reverse=!reverse">Service&nbsp;<span ng-hide="predicate != 'service'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th><a href="" ng-click="predicate = 'resource'; reverse=!reverse">Resource&nbsp;<span ng-hide="predicate != 'resource'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th><a href="" ng-click="predicate = 'event'; reverse=!reverse">Event&nbsp;<span ng-hide="predicate != 'event'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="hidden-xs"><a href="" ng-click="predicate = 'value'; reverse=!reverse">Value&nbsp;<span ng-hide="predicate != 'value'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
          <th class="hidden-xs"><a href="" ng-click="predicate = 'text'; reverse=!reverse">Text&nbsp;<span ng-hide="predicate != 'text'"><span ng-show="!reverse">^</span><span ng-show="reverse">v</span></span></a></th>
        </tr>

        <tr ng-repeat="alert in alerts | filter:search | orderBy:predicate:reverse | limitTo:alertLimit"
            class="severity severity-{{ alert.severity}}"
            ng-controller="AlertLinkController" ng-click="getDetails(alert);">
          <td class="hidden-xs"><i class="glyphicon glyphicon-{{ alert.trendIndication | arrow }}"></i>&nbsp;<span class="label label-{{ alert.severity }}">{{ alert.severity | capitalize }}</span></td>
          <td class="hidden-xs"><span class="label label-{{ alert.status }}">{{ alert.status | capitalize }}</span></td>
          <td class="hidden-lg">{{ alert.lastReceiveTime | date:'HH:mm' }}</td>
          <td class="visible-lg">{{ alert.lastReceiveTime | date:'EEE&nbsp;d&nbsp;MMM&nbsp;HH:mm' }}</td>
          <td class="visible-lg">{{ alert.duplicateCount }}</td>
          <td class="hidden-xs">{{ alert.environment }}</td>
          <td class="hidden-xs">{{ alert.service.join(', ') }}</td>
          <td>{{ alert.resource }}</td>
          <td>{{ alert.event }}</td>
          <td class="hidden-xs">{{ alert.value }}</td>
          <td class="hidden-xs">{{ alert.text }}</td>
        </tr>
      </table>

      <div ng-show="!alerts">
          <center><img src="img/loading.gif"/></center>
      </div>

      <div ng-show="alerts.length == 0">
          <center>{{ response_status | uppercase }} - {{ response_message }}</center>
      </div>

    </div>
  </div> <!-- row -->

  <div class="row" ng-show="alerts">
    <div class="col-md-12">
    <button type="button" class="btn btn-default full-width" ng-click="alertLimit = alertLimit + 20">{{(alerts|filter:search).length | showing:alertLimit }}</button>
  </div>
  </div> <!-- row -->

</div> <!-- container -->
