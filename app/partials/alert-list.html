

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
    <div class="btn-toolbar" role="toolbar">
      <div class="btn-group btn-group-sm">
        <button type="button" class="btn btn-default" ng-click="status = 'open'" ng-class="{ 'active' : status == 'open' }">Open&nbsp;<span class="badge">{{ statusCounts.open || 0 }}</span></button>
        <button type="button" class="btn btn-default" ng-click="status = 'ack'" ng-class="{ 'active' : status == 'ack' }">Ack&nbsp;<span class="badge">{{ statusCounts.ack || 0 }}</span></button>
        <button type="button" class="btn btn-default" ng-click="status = 'closed'" ng-class="{ 'active' : status == 'closed' }">Closed&nbsp;<span class="badge">{{ statusCounts.closed || 0 }}</span></button>
      </div>

      <div class="col-xs-2">
      <select class="form-control input-sm" ng-model="environment" ng-options="e.environment as e.environment for e in environments">
        <option value="">--- Environment ---</option>
      </select>
      </div>
      <div class="col-xs-2">
      <select class="form-control input-sm" ng-model="service" ng-options="s.service as s.service group by s.environment for s in services">
        <option value="">--- Service ---</option>
      </select>
      </div>

      <div class="col-xs-2">
      <select class="form-control input-sm" ng-model="query" ng-options="c.query as c.name group by c.group for c in config.widgets">
        <option value="">--- Query ---</option>
      </select>
      </div>

      {{ config }}

      <div class="col-xs-1">
      <input class="form-control input-sm" type="integer" ng-model="alertLimit" size="4">
      </div>
      <div class="col-xs-2">
      <input class="form-control input-sm" ng-model="search" size="8" placeholder="Search">
      </div>

      <div class="col-xs-1">
        <input type="checkbox" class="checkbox input-sm" ng-model="debug">
      </div>
      <div class="btn-group pull-right">
        <button type="button" class="btn btn-default btn-info btn-sm" ng-click="getAlerts()">Refresh</button>
      </div>
    </div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12">
      {{(alerts|filter:search).length | showing:alertLimit }}
    </div>
  </div>

  <div class="check-element animate-show" ng-show="debug">
    <pre>{{ query | json }}</pre>
  </div>

  <div class="check-element animate-show" ng-show="debug">
    <pre>{{ config | json }}</pre>
  </div>

  <div class="row-fluid">
    <div class="span12">
      <!--Body content-->

      <table class="table">
        <tr>
          <th>Severity</th>
          <th>Status</th>
          <th>Last Receive Time</th>
          <th>Dupl.</th>
          <th>Environment</th>
          <th>Service</th>
          <th>Resource</th>
          <th>Event</th>
          <th>Value</th>
          <th>Text</th>
        </tr>
        <tr ng-repeat="alert in alerts | filter:search | orderBy:[severityCode,'-lastReceiveTime'] | limitTo:alertLimit"
            class="severity severity-{{ alert.severity}}"
            ng-controller="AlertLinkController" ng-click="getDetails(alert);">
          <td><i class="glyphicon glyphicon-{{ alert.trendIndication | arrow }}"></i>&nbsp;<span class="label label-{{ alert.severity }}">{{ alert.severity | capitalize }}</span></td>
          <td><span class="label label-{{ alert.status }}">{{ alert.status | capitalize }}</span></td>
          <td>{{ alert.lastReceiveTime | date:'EEE&nbsp;d&nbsp;MMM&nbsp;HH:mm' }}</td>
          <td>{{ alert.duplicateCount }}</td>
          <td>{{ alert.environment }}</td>
          <td>{{ alert.service.join(', ') }}</td>
          <td>{{ alert.resource }}</td>
          <td>{{ alert.event }}</td>
          <td>{{ alert.value }}</td>
          <td>{{ alert.text }}</td>
        </tr>
      </table>

    </div>
  </div>

</div>
